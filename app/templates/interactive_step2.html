{% extends 'base.html' %}

{% block title %}Prompt Optimization Web App{% endblock %}

{% block content %}
<h2>Interactive Prompt Optimization</h2>
<p>Please answer these follow‑up questions:</p>

<form method="post" action="{{ url_for('main.interactive_followup') }}">
  {% for q in followups %}
    <div class="mb-3">
      <label class="form-label">{{ loop.index }}. {{ q }}</label>
      <textarea
        name="follow_a"
        class="form-control"
        rows="2"
        required
      ></textarea>
      <input type="hidden" name="follow_q" value="{{ q }}">
    </div>
  {% endfor %}

    <button id="sendBtn" type="submit" class="btn btn-lg text-white" style="background-color: #6c757d;">
      <span class="btn-label">Submit</span>
      <span class="spinner-border spinner-border-sm ms-2 d-none" role="status" aria-hidden="true"></span>
    </button>

</form>
{% endblock %}


{% block extra_scripts %}
<script>
  // loading animation
  document.querySelector('form').addEventListener('submit', function(e) {
    const btn = document.getElementById('sendBtn');
    const spinner = btn.querySelector('.spinner-border');
    const label   = btn.querySelector('.btn-label');
    // disable to prevent double‐submits
    btn.disabled = true;
    // hide label, show spinner + “Loading…”
    label.textContent = 'Loading…';
    spinner.classList.remove('d-none');
  });

</script>
{% endblock %}